;; ==============================================================================\n;; Kanata Configuration - Converted from Karabiner-Elements\n;; ==============================================================================\n;; This configuration replicates the following features:\n;; 1. Home row mods (a/s/d/f and j/k/l/; as modifiers when held)\n;; 2. Simultaneous key combinations for modifier combos\n;; 3. Caps Lock as Hyper key + vim-style navigation\n;; 4. Double-tap right shift for caps lock\n;; 5. Grave accent → non_us_backslash remapping\n;; 6. MAC-LIKE WINDOWS SHORTCUTS:\n;;    - Ctrl+Q → Alt+F4 (quit app)\n;;    - Ctrl+Tab → Alt+Tab (app switcher)\n;;    - Ctrl+Space → Win (Start/search, Spotlight-like)\n;;    - Ctrl+Shift+4 → Win+Shift+S (snipping tool)\n;;    - Ctrl+M → Win+Down (minimize window)\n;;    - Ctrl+G/H → Win+D (show desktop)\n;;\n;; MAC-TO-WINDOWS KEY MAPPING (mirrors your workflow):\n;; ┌─────────────────────────────────────────────────────────────────┐\n;; │ Position      │ Mac Key      │ Windows Key │ Home Row Mod       │\n;; ├─────────────────────────────────────────────────────────────────┤\n;; │ A (pinky)     │ Alt          │ Alt         │ a → Alt            │\n;; │ S (ring)      │ Option ⌥     │ Win ⊞       │ s → Win            │\n;; │ D (middle)    │ Command ⌘    │ Ctrl        │ d → Ctrl           │\n;; │ F (index)     │ Shift        │ Shift       │ f → Shift          │\n;; │                                                                   │\n;; │ J (index)     │ Shift        │ Shift       │ j → Shift          │\n;; │ K (middle)    │ Command ⌘    │ Ctrl        │ k → Ctrl           │\n;; │ L (ring)      │ Option ⌥     │ Win ⊞       │ l → Win            │\n;; │ ; (pinky)     │ Alt          │ Alt         │ ; → Alt            │\n;; └─────────────────────────────────────────────────────────────────┘\n;;\n;; Perfect muscle memory transfer:\n;; - Mac: Cmd+C (middle finger D/K) = Windows: Ctrl+C (middle finger D/K)\n;; - Mac: Cmd+V (middle finger D/K) = Windows: Ctrl+V (middle finger D/K)\n;; - Mac: Option+Tab (ring finger S/L) = Windows: Win+Tab (ring finger S/L)\n;; ==============================================================================\n\n(defcfg\n  process-unmapped-keys yes\n  danger-enable-cmd no\n  log-layer-changes no\n)\n\n;; ==============================================================================\n;; Source Keys - Define all keys we\u2019ll be remapping\n;; ==============================================================================\n(defsrc\n  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc\n  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \\n  caps a    s    d    f    g    h    j    k    l    ;    '    ret\n  lsft z    x    c    v    b    n    m    ,    .    /    rsft\n  lctl lmet lalt           spc            ralt rmet rctl\n)\n\n;; ==============================================================================\n;; Aliases - Home Row Mods and Special Keys\n;; ==============================================================================\n(defalias\n  ;; ============================================================================\n  ;; LEFT HAND HOME ROW MODS (a/s/d/f) - MIRRORS RIGHT HAND\n  ;; ============================================================================\n  ;; These use tap-hold-release: WAITS for key release before deciding\n  ;; This prevents accidental holds when typing fast!\n  ;; Format: (tap-hold-release <tap-timeout> <hold-timeout> <tap-action> <hold-action>)\n  ;;\n  ;; Mac keyboard:     A=Alt     S=Opt/Win  D=Cmd/Ctrl  F=Shift\n  ;; Windows keyboard: A=Alt     S=Win      D=Ctrl      F=Shift\n  \n  a (tap-hold-release 200 200 a lalt)         ;; a → Alt\n  s (tap-hold-release 200 200 s lmet)         ;; s → Win (Option/Windows button)\n  d (tap-hold-release 200 200 d lctl)         ;; d → Ctrl (Mac Command - for Ctrl+C, Ctrl+V)\n  f (tap-hold-release 200 200 f lsft)         ;; f → Shift\n  \n  ;; ============================================================================\n  ;; RIGHT HAND HOME ROW MODS (j/k/l/;) - MAC-STYLE POSITIONING\n  ;; ============================================================================\n  ;; Mac keyboard:     J=Shift   K=Cmd/Ctrl  L=Opt/Win   ;=Alt\n  ;; Windows keyboard: J=Shift   K=Ctrl      L=Win       ;=Alt\n  \n  j (tap-hold-release 200 200 j rsft)   ;; j → Shift\n  k (tap-hold-release 200 200 k rctl)   ;; k → Ctrl (Mac Command equivalent)\n  l (tap-hold-release 200 200 l rmet)   ;; l → Win (Option/Windows button)\n  ; (tap-hold-release 200 200 ; ralt)   ;; ; → Alt\n  \n  ;; ============================================================================\n  ;; CAPS LOCK AS HYPER KEY\n  ;; ============================================================================\n  ;; Caps Lock → Hyper layer when held, Escape when tapped\n  hyp (tap-hold-release 200 200 esc (layer-toggle hyper))\n  \n  ;; ============================================================================\n  ;; DOUBLE-TAP RIGHT SHIFT FOR CAPS LOCK\n  ;; ============================================================================\n  ;; Right shift → caps lock on double tap, shift on single tap/hold\n  rsf (tap-hold-release 200 200 (multi rsft (one-shot 500 rsft)) rsft)\n  \n  ;; ============================================================================\n  ;; GRAVE ACCENT REMAP\n  ;; ============================================================================\n  ;; Grave accent → non_us_backslash (for ISO keyboard layout)\n  grv-remap nubs\n  \n  ;; ============================================================================\n  ;; MAC-LIKE WINDOWS SHORTCUTS\n  ;; ============================================================================\n  ;; Ctrl+Q → Alt+F4 (quit app)\n  ctrlq (macro A-f4)\n  \n  ;; Ctrl+Tab → Alt+Tab (app switcher)\n  ctrltab (macro A-tab)\n  \n  ;; Ctrl+Space → Win key (Start/search, Spotlight-like)\n  ctrlspc (macro lmet)\n  \n  ;; Ctrl+Shift+4 → Win+Shift+S (snipping tool)\n  ctrlshft4 (macro lmet-S-s)\n  \n  ;; Ctrl+M → Win+Down (minimize window)\n  ctrlm (macro lmet-down)\n  \n  ;; Ctrl+G → Win+D (show desktop)\n  ctrlg (macro lmet-d)\n  \n  ;; Ctrl+H → Win+D (show desktop alternative)\n  ctrlh (macro lmet-d)\n)\n\n;; ==============================================================================\n;; BASE LAYER - Default typing layer with home row mods\n;; ==============================================================================\n(deflayer base\n  @grv-remap  1    2    3    4    5    6    7    8    9    0    -    =    bspc\n  @ctrltab    @ctrlq    w    e    r    t    y    u    i    o    p    [    ]    \\n  @hyp        @a   @s   @d   @f   @ctrlg    @ctrlh    @j   @k   @l   @;   '    ret\n  lsft        z    x    c    v    b    n    @ctrlm    ,    .    /    @rsf\n  lctl        lmet lalt           @ctrlspc            ralt rmet rctl\n)\n\n;; ==============================================================================\n;; HYPER LAYER - Activated when Caps Lock is held\n;; ==============================================================================\n;; This layer provides vim-style navigation and other shortcuts\n(deflayer hyper\n  _    _    _    _    @ctrlshft4    _    _    _    _    _    _    _    _    _\n  _    _    _    _    _    _    _    _    up   _    _    _    _    _\n  _    _    _    C-lft _  C-rght _    lft  down rght lalt _    _\n  _    _    _    _    _    _    _    _    _    _    _    _\n  _    _    _              _              _    _    _\n)\n\n;; ==============================================================================\n;; IMPLEMENTATION NOTES\n;; ==============================================================================\n;; 1. HOME ROW MODS SIMULTANEOUS COMBINATIONS:\n;;    Your Karabiner config has extensive simultaneous key combinations\n;;    (e.g., a+s → Ctrl+Alt, s+d → Alt+Win, etc.)\n;;    \n;;    Kanata handles this differently using chord definitions.\n;;    Below is an ALTERNATIVE implementation using defchords if needed:\n;;\n;; (defchords name <timeout>\n;;   (a s) C-lalt    ;; Press a+s together → Ctrl+Alt\n;;   (a d) C-lmet    ;; Press a+d together → Ctrl+Win\n;;   (a f) C-lsft    ;; Press a+f together → Ctrl+Shift\n;;   (s d) lalt-lmet ;; Press s+d together → Alt+Win\n;;   (s f) lalt-lsft ;; Press s+f together → Alt+Shift\n;;   (d f) lmet-lsft ;; Press d+f together → Win+Shift\n;;    \n;;   ;; 3-key combinations\n;;   (a s d) C-lmet-lalt      ;; a+s+d → Ctrl+Win+Alt\n;;   (a d f) C-lmet-lsft      ;; a+d+f → Ctrl+Win+Shift\n;;   (s d f) lalt-lmet-lsft   ;; s+d+f → Alt+Win+Shift\n;;    \n;;   ;; 4-key combination\n;;   (a s d f) C-lalt-lmet-lsft ;; All 4 → Ctrl+Alt+Win+Shift (Hyper)\n;;    \n;;   ;; Right hand combinations\n;;   (; l) rctl-ralt\n;;   (; k) rctl-rmet\n;;   (; j) rctl-rsft\n;;   (l k) ralt-rmet\n;;   (l j) ralt-rsft\n;;   (k j) rmet-rsft\n;;    \n;;   ;; Right hand 3-key\n;;   (; l k) rctl-ralt-rmet\n;;   (; k j) rctl-rmet-rsft\n;;   (l k j) ralt-rmet-rsft\n;;    \n;;   ;; Right hand 4-key\n;;   (j k l ;) rctl-ralt-rmet-rsft\n;; )\n;;    \n;; 2. DOUBLE-TAP RIGHT SHIFT:\n;;    The current implementation uses one-shot. For true double-tap detection,\n;;    you may need to use tap-dance or a more complex macro.\n;;    \n;; 3. CAPS LOCK TOGGLE:\n;;    To toggle caps lock with double-tap right shift, use this alias:\n;;    rsf (tap-dance 200 ((rsft) (caps)))\n;;    \n;; 4. WINDOWS VS MACOS KEY MAPPING:\n;;    - lmet/rmet = Windows key (equivalent to Command on Mac)\n;;    - lalt/ralt = Alt key (equivalent to Option on Mac)\n;;    - lctl/rctl = Control key (same on both)\n;;    \n;; 5. CONDITIONAL MODIFIERS (hyper_caps_lock variable):\n;;    Your Karabiner config disables d/f/j/k/l/; modifiers when hyper is active.\n;;    Kanata's tap-hold-press can partially handle this by preventing mod\n;;    activation when in certain layers, but full replication requires\n;;    custom layer switching logic.\n;; ==============================================================================\n;; ADVANCED CONFIGURATION WITH DEFCHORDS (UNCOMMENT IF NEEDED)\n;; ==============================================================================\n;; If you want the exact simultaneous key behavior from Karabiner,\n;; uncomment this section and comment out the simple home row mods above.\n;;    \n;; NOTE: This approach is more complex but provides exact parity with Karabiner\n;;    \n;; (defchords asdf 50\n;;   ;; Left hand 2-key combinations (MAC-STYLE POSITIONING)\n;;   ;; a=Alt, s=Win, d=Ctrl, f=Shift\n;;   (a s) (multi lalt lmet)           ;; Alt+Win\n;;   (a d) (multi lalt lctl)           ;; Alt+Ctrl\n;;   (a f) (multi lalt lsft)           ;; Alt+Shift\n;;   (s d) (multi lmet lctl)           ;; Win+Ctrl (matches Mac Opt+Cmd)\n;;   (s f) (multi lmet lsft)           ;; Win+Shift\n;;   (d f) (multi lctl lsft)           ;; Ctrl+Shift (matches Mac Cmd+Shift)\n;;    \n;;   ;; Left hand 3-key combinations\n;;   (a s d) (multi lalt lmet lctl)    ;; Alt+Win+Ctrl\n;;   (a d f) (multi lalt lctl lsft)    ;; Alt+Ctrl+Shift\n;;   (s d f) (multi lmet lctl lsft)    ;; Win+Ctrl+Shift\n;;    \n;;   ;; Left hand 4-key combination (Hyper)\n;;   (a s d f) (multi lalt lmet lctl lsft)\n;; )\n;;    \n;; (defchords jkl; 50\n;;   ;; Right hand 2-key combinations\n;;   ;; j=Shift, k=Ctrl, l=Win, ;=Alt\n;;   (; l) (multi ralt rmet)\n;;   (; k) (multi ralt rctl)\n;;   (; j) (multi ralt rsft)\n;;   (l k) (multi rmet rctl)\n;;   (l j) (multi rmet rsft)\n;;   (k j) (multi rctl rsft)\n;;    \n;;   ;; Right hand 3-key combinations\n;;   (; l k) (multi ralt rmet rctl)\n;;   (; k j) (multi ralt rctl rsft)\n;;   (l k j) (multi rmet rctl rsft)\n;;    \n;;   ;; Right hand 4-key combination\n;;   (j k l ;) (multi ralt rmet rctl rsft)\n;; )\n;;    \n;; Then modify the base layer to use the chord-aware keys:\n;; (deflayer base-with-chords\n;;   @grv-remap  1    2    3    4    5    6    7    8    9    0    -    =    bspc\n;;   tab         q    w    e    r    t    y    u    i    o    p    [    ]    \\n;;   @hyp        a    s    d    f    g    h    j    k    l    ;    '    ret\n;;   lsft        z    x    c    v    b    n    m    ,    .    /    @rsf\n;;   lctl        lmet lalt           spc            ralt rmet rctl\n;; )\n;; ==============================================================================\n;; USAGE INSTRUCTIONS FOR WINDOWS\n;; ==============================================================================\n;; 1. Download Kanata:\n;;    https://github.com/jtroo/kanata/releases\n;;    Download kanata.exe (for Windows)\n;; 2. Place this config file at:\n;;    C:\Users\YourUsername\.config\kanata.kbd\n;;    (or any location you prefer)\n;; 3. Run Kanata:\n;;    kanata.exe --cfg "C:\Users\YourUsername\.config\kanata.kbd"\n;; 4. Run on Startup (optional):\n;;    - Press Win+R, type: shell:startup\n;;    - Create a shortcut to kanata.exe with the --cfg argument\n;;    - Or create a .bat file with the command above\n;; 5. Run with Admin Rights (may be needed):\n;;    Right-click kanata.exe → Properties → Compatibility → \n;;    Check "Run this program as administrator"\n;; ==============================================================================\n;; ALTERNATIVE: USING WINDOWS INTERCEPTION DRIVER\n;; ==============================================================================\n;; For better compatibility, especially in games and admin windows:\n;; 1. Install the Interception driver:\n;;    https://github.com/oblitum/Interception\n;; 2. Run Kanata with the driver:\n;;    kanata.exe --cfg kanata.kbd --interception\n;; ==============================================================================\n